Домашнее задание №3: Распараллеливание уравнения теплопроводности (MPI)
Студент: Макалодин Матвей

================================================================================
КОМПИЛЯЦИЯ И ЗАПУСК НА УЗЛАХ КЛАСТЕРА
================================================================================

1. ЗАГРУЗКА МОДУЛЕЙ
-------------------
module load openmpi/4.1.5

Для Task 5 (гибридная задача):
module load nvidia_sdk/nvhpc/23.5

Для Task 6 (2D с MKL):
module load intel/oneapi


2. КОМПИЛЯЦИЯ
-------------
Для каждой задачи перейдите в соответствующую папку и выполните:

Task 1-4 (MPI):
  cd task1  # или task2, task3, task4
  make

Task 5 (MPI + CUDA):
  cd task5
  make

Task 6 (MKL):
  cd task6
  make


3. ЗАПУСК
---------
Локальный запуск (интерактивно):
  mpirun -np <количество_процессов> ./heat_equation [параметры]

Примеры:
  # Task 1: проверка корректности
  mpirun -np 1 ./heat_equation

  # Task 2: масштабируемость
  mpirun -np 4 ./heat_equation 10000

  # Task 3: асинхронная передача
  mpirun -np 8 ./heat_equation 25000

  # Task 4: коллективные операции
  mpirun -np 16 ./heat_equation 50000

  # Task 5: гибридная задача (требуется ровно 2 процесса)
  mpirun -np 2 ./heat_equation 10000

  # Task 6: 2D задача
  ./heat_equation_2d 100


Запуск через SLURM (рекомендуется):
  sbatch run_task1.sbatch
  sbatch run_task2.sbatch
  sbatch run_task3.sbatch
  sbatch run_task4.sbatch
  sbatch run_task5.sbatch
  sbatch run_task6.sbatch


4. ПАРАМЕТРЫ ЗАДАЧ
------------------
Task 1:
  Параметры фиксированы: k=1.0, h=0.02, τ=0.0002, T=0.1
  Вычисляет значения в 11 точках и сравнивает с точным решением

Task 2-4:
  Аргумент командной строки: N (количество точек)
  Рекомендуемые значения: 10000, 25000, 50000
  Конечное время автоматически уменьшено до T=10^-4 для ускорения

Task 5:
  Аргумент командной строки: N (количество точек)
  Требуется ровно 2 MPI процесса
  Каждый процесс использует свой GPU

Task 6:
  Аргумент командной строки: N (размер сетки NxN)
  Рекомендуемые значения: 50, 100, 200


5. РЕЗУЛЬТАТЫ
-------------
Task 1: task1/task1_results.txt - численные значения температуры
Task 2: task2/scalability_results.csv - результаты масштабируемости
Task 3: task3/scalability_results_async.csv - результаты асинхронной версии
Task 4: task4/scalability_results_collective.csv - результаты с коллективными операциями
Task 6: task6/task6_results.txt - 2D распределение температуры
        task6/task6_performance.csv - производительность


6. АНАЛИЗ РЕЗУЛЬТАТОВ
---------------------
После выполнения всех задач запустите скрипт анализа:

  pip install -r requirements.txt
  python analyze_results.py

Скрипт создаст графики:
  - task1_correctness.png - сравнение численного и точного решений
  - task2_scalability.png - графики масштабируемости
  - task3_comparison.png - сравнение синхронной и асинхронной версий
  - task4_performance.png - производительность с коллективными операциями
  - task6_2d_results.png - визуализация 2D решения


7. ПРИМЕЧАНИЯ
-------------
- Убедитесь, что модули загружены перед компиляцией
- Для Task 5 требуется доступ к GPU (--gpus=2 в SLURM)
- Для Task 6 требуется модуль Intel OneAPI с MKL
- Все задачи используют явную конечно-разностную схему
- Условие устойчивости автоматически проверяется и учитывается

